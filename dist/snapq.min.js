//snapQ 1.0.3 https://github.com/chsneo/underscore.snapQ
(function(){_.mixin({nextItem:function(a,c){var b=_.indexOf(a,c);return b<a.length-1?a[b+1]:_.first(a)},previousItem:function(a,c){var b=_.indexOf(a,c);return 0<b?a[b-1]:_.last(a)},keyIndex:function(a,c,b){c=_.findWhere(a,{key:b});a=_.indexOf(a,c);return-1===a?null:a},pluckMultiple:function(){var a=_.rest(arguments,1);return _.map(arguments[0],function(c){var b={};_.each(a,function(a){b[a]=c[a]});return b})},rejectMultiple:function(a,c,b){return _.reject(a,function(a){return-1!=c.indexOf(a[b])})},findMultiple:function(a,c,b){return _.filter(a,function(a){return-1!=c.indexOf(a[b])})},toCommaString:function(a,c,b){b=b||",";return _.pluck(a,c||"id").join(b)},addToggle:function(a,c,b){a=a||[];var f;if(b){if(f=_.find(a,function(a){return a[b]===c[b]}))return _.filter(a,function(a){return a[b]!==c[b]})}else if(f=_.indexOf(a,function(a){return a===c}),-1<f)return _.filter(a,function(a){return a!==c});a.push(c);return a},deleteItem:function(a,c){var b=a.indexOf(c);-1!=b&&a.splice(b,1)},getTime:function(a){var c=        "00",b="00",f="00",d,h,k,l,e,g;try{d=a.split(" ");e=_.last(d);"AM"===e||"am"===e?h=_.previousItem(d,e):"PM"===e||"pm"===e?(h=_.previousItem(d,e),k=!0):(h=e,g=!0);l=h.split(":");c=parseInt(l[0]);if(!g&&!k&&12===c)c=0;else if(g||k)!g&&k&&12===c?c=12:g||(c+=12);b=parseInt(l[1]);f=parseInt(l[2])}catch(m){console.error("! unable to parse "+a)}return{hh:c,mm:b,ss:f}},elapsedTime:function(a,c){var b=new Date(a),b=(new Date(c)).getTime()-b.getTime();return{milliseconds:b,seconds:b/1E3}},compactObject:function(a,c){var b=_.clone(a);_.each(b,function(a,d){a?c&&d==c&&delete b[d]:delete b[d]});return b}})})();